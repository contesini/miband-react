(window["webpackJsonpmiband-react"]=window["webpackJsonpmiband-react"]||[]).push([[0],{105:function(e,t){},107:function(e,t){},127:function(e,t,n){},128:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(18),i=n.n(c),o=n(14),s=n(33),u=n(60),p=n.n(u),d=n(61),l=n.n(d),h=n(62),b=(n(84),n(10)),f=n.n(b),m=n(25),v=n(63),E=n(24),g=n(64),y=n(65),O=n(7),N=n(66),D=n(34),w=n.n(D),H=function(e){return{type:"NAME_CHANGED",payload:e}},j=function(e){return{type:"ID_CHANGED",payload:e}},_=function(e){return{type:"HEARTH_BEAT_CHANGED",payload:e}},x=function(e){return{type:"MIBAND_CHANGED",payload:e}},A=function(e){return{type:"BLUETOOTH_CHANGED",payload:e}},C=function(e){return{type:"DEVICE_CHANGED",payload:e}},T=function(e){return{type:"TREINO_CHANGED",payload:e}},k=n(145),S=n(142),B=n(144),G=function(e){return!e.hidden&&e.children},I=(n(127),function(e){function t(e){var n;return Object(v.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,e))).startHrm=function(){var e=Object(m.a)(f.a.mark(function e(t){var r,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t("Connecting to the device..."),n.props.miband){e.next=12;break}return e.next=5,n.props.device.gatt.connect();case 5:return r=e.sent,t("Connected"),a=new w.a(r),e.next=10,a.init();case 10:a.on("heart_rate",function(e){t("Heart Rate:",e),n.props.changeHearthBeat(e)}),n.props.changeMiband(a);case 12:return e.next=14,n.props.changeTreinoStatus(!0);case 14:return e.next=16,n.props.miband.hrmStart();case 16:e.next=23;break;case 18:e.prev=18,e.t0=e.catch(0),t("Argh!",e.t0),t("Argh!",e.t0.message),Object(s.b)(t);case 23:case"end":return e.stop()}},e,null,[[0,18]])}));return function(t){return e.apply(this,arguments)}}(),n.endHrm=function(){var e=Object(m.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t("end hrm"),e.next=3,n.props.miband.hrmStop();case 3:return e.next=5,n.props.changeTreinoStatus(!1);case 5:return e.next=7,n.props.changeMiband(null);case 7:t("disconnect device");case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.startHrm=n.startHrm.bind(Object(O.a)(n)),n.endHrm=n.endHrm.bind(Object(O.a)(n)),n.scan=n.scan.bind(Object(O.a)(n)),n.props.changeBluetooth(navigator.bluetooth),n.notigicarPulseira=n.notigicarPulseira.bind(Object(O.a)(n)),n}return Object(N.a)(t,e),Object(E.a)(t,[{key:"notigicarPulseira",value:function(){var e=Object(m.a)(f.a.mark(function e(t){var n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.miband){e.next=4;break}this.props.miband.showNotification("message"),e.next=12;break;case 4:return e.next=6,this.props.device.gatt.connect();case 6:return n=e.sent,r=new w.a(n),this.props.changeMiband(r),e.next=11,r.init();case 11:r.showNotification("message");case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"scan",value:function(){var e=Object(m.a)(f.a.mark(function e(t){var n,r=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.bluetooth){e.next=3;break}return t("WebBluetooth is not supported by your browser!"),e.abrupt("return");case 3:if(t("Requesting Bluetooth Device..."),this.props.device){e.next=9;break}return e.next=7,this.props.bluetooth.requestDevice({filters:[{services:[w.a.advertisementService]}],optionalServices:w.a.optionalServices});case 7:n=e.sent,this.props.changeDevice(n);case 9:return this.props.device.addEventListener("gattserverdisconnected",Object(m.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t("Device disconnected"),e.next=3,r.props.device.gatt.disconnect();case 3:r.startHrm(t,r.props.device);case 4:case"end":return e.stop()}},e)}))),e.next=12,this.props.device.gatt.disconnect();case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return a.a.createElement(B.a,{className:"App",justifyContent:"flex-start"},a.a.createElement("div",{className:"button-padding"},a.a.createElement(S.a,null,"favorite")," : ",a.a.createElement("strong",null,this.props.hearthBeat)),a.a.createElement(G,{hidden:null!==this.props.device},a.a.createElement("div",{className:"button-padding"},a.a.createElement(k.a,{variant:"contained",color:"primary",onClick:function(){return e.scan(console.log)}},"Conectar"))),a.a.createElement(G,{hidden:this.props.isTreinoStarted||null===this.props.device},a.a.createElement("div",{className:"button-padding"},a.a.createElement(k.a,{variant:"contained",color:"primary",onClick:function(){return e.startHrm(console.log)}},"Iniciar Treino"))),a.a.createElement(G,{hidden:!this.props.isTreinoStarted||null===this.props.device},a.a.createElement("div",{className:"button-padding"},a.a.createElement(k.a,{variant:"contained",color:"primary",onClick:function(){return e.endHrm(console.log)}},"Finalizar Treino"))),a.a.createElement(G,{hidden:null===this.props.device},a.a.createElement("div",{className:"button-padding"},a.a.createElement(k.a,{variant:"contained",color:"primary",onClick:function(){return e.notigicarPulseira(console.log)}},"Notificar Pulseira"))))}}]),t}(a.a.Component)),P=Object(s.b)(function(e){return{id:e.user.id,name:e.user.name,hearthBeat:e.user.hearthBeat,device:e.user.device,miband:e.user.miband,bluetooth:e.user.bluetooth,isTreinoStarted:e.user.isTreinoStarted}},function(e){return Object(o.b)({changeId:j,changeHearthBeat:_,changeName:H,changeMiband:x,changeBluetooth:A,changeDevice:C,changeTreinoStatus:T},e)})(I),M=n(15);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(n,!0).forEach(function(t){Object(M.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var U={id:"123548",name:"allan contesini",hearthBeat:0,bluetooth:null,device:null,miband:null,isTreinoStarted:!1},V=Object(o.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ID_CHANGED":return L({},e,{id:t.payload});case"NAME_CHANGED":return L({},e,{name:t.payload});case"HEARTH_BEAT_CHANGED":return L({},e,{hearthBeat:t.payload});case"MIBAND_CHANGED":return L({},e,{miband:t.payload});case"BLUETOOTH_CHANGED":return L({},e,{bluetooth:t.payload});case"DEVICE_CHANGED":return L({},e,{device:t.payload});case"TREINO_CHANGED":return L({},e,{isTreinoStarted:t.payload});default:return L({},e)}}}),X=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),q=Object(o.a)(h.a,l.a,p.a)(o.d)(V,X);i.a.render(a.a.createElement(s.a,{store:q},a.a.createElement(P,null)),document.getElementById("root"))},71:function(e,t,n){e.exports=n(128)},84:function(e,t,n){}},[[71,1,2]]]);
//# sourceMappingURL=main.d66ae09d.chunk.js.map