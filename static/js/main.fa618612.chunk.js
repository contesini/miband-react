(window["webpackJsonpmiband-react"]=window["webpackJsonpmiband-react"]||[]).push([[0],{106:function(e,t){},108:function(e,t){},128:function(e,t,n){},129:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(25),i=n.n(c),o=n(6),u=n(13),s=n(65),l=n.n(s),p=n(66),d=n.n(p),h=n(67),b=(n(85),n(15)),f=n(10),m=n(16),v=n(17),O=n(20),E=function(e){return{type:"NAME_CHANGED",payload:e}},g=function(e){return{type:"ID_CHANGED",payload:e}},j=function(e){return{type:"HEARTH_BEAT_CHANGED",payload:e}},y=function(e){return{type:"MIBAND_CHANGED",payload:e}},N=function(e){return{type:"BLUETOOTH_CHANGED",payload:e}},w=function(e){return{type:"DEVICE_CHANGED",payload:e}},D=function(e){return{type:"TREINO_CHANGED",payload:e}},H=n(142),C=n(144),_=function(e){return!e.hidden&&e.children},x=n(9),T=n.n(x),k=n(21),A=n(5),S=n(145),B=n(31),G=n.n(B),I=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(m.a)(this,Object(v.a)(t).call(this,e))).connectar=n.connectar.bind(Object(A.a)(n)),n}return Object(O.a)(t,e),Object(f.a)(t,[{key:"connectar",value:function(){var e=Object(k.a)(T.a.mark(function e(t){var n;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.bluetooth){e.next=3;break}return t("WebBluetooth is not supported by your browser!"),e.abrupt("return");case 3:if(t("Requesting Bluetooth Device..."),this.props.device){e.next=10;break}return e.next=7,this.props.bluetooth.requestDevice({filters:[{services:[G.a.advertisementService]}],optionalServices:G.a.optionalServices});case 7:return n=e.sent,e.next=10,this.props.changeDevice(n);case 10:return n.addEventListener("gattserverdisconnected",Object(k.a)(T.a.mark(function e(){return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t("Device disconnected"),e.next=3,n.gatt.disconnect();case 3:case"end":return e.stop()}},e)}))),e.next=13,n.gatt.disconnect();case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return a.a.createElement(S.a,{variant:"contained",color:"primary",onClick:function(){return e.connectar(console.log)}},"Conectar")}}]),t}(a.a.Component),P=Object(u.b)(function(e){return{device:e.user.device,bluetooth:e.user.bluetooth}},function(e){return Object(o.b)({changeDevice:w},e)})(I),M=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(m.a)(this,Object(v.a)(t).call(this,e))).startHrm=function(){var e=Object(k.a)(T.a.mark(function e(t){var r,a;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.props.changeTreinoStatus(!0);case 3:if(t("Connecting to the device..."),n.props.miband){e.next=14;break}return e.next=7,n.props.device.gatt.connect();case 7:return r=e.sent,t("Connected"),a=new G.a(r),e.next=12,a.init();case 12:a.on("heart_rate",function(e){t("Heart Rate:",e),n.props.changeHearthBeat(e)}),n.props.changeMiband(a);case 14:return e.next=16,n.props.miband.hrmStart();case 16:e.next=23;break;case 18:return e.prev=18,e.t0=e.catch(0),t("Argh!",e.t0.message||e.t0),e.next=23,n.props.changeTreinoStatus(!1);case 23:case"end":return e.stop()}},e,null,[[0,18]])}));return function(t){return e.apply(this,arguments)}}(),n.startHrm=n.startHrm.bind(Object(A.a)(n)),n}return Object(O.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement(S.a,{variant:"contained",color:"primary",onClick:function(){return e.startHrm(console.log)}},"Iniciar Treino")}}]),t}(a.a.Component),R=Object(u.b)(function(e){return{device:e.user.device,miband:e.user.miband}},function(e){return Object(o.b)({changeHearthBeat:j,changeTreinoStatus:D,changeMiband:y},e)})(M),L=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(m.a)(this,Object(v.a)(t).call(this,e))).endHrm=function(){var e=Object(k.a)(T.a.mark(function e(t){return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t("end hrm"),e.next=3,n.props.miband.hrmStop();case 3:return e.next=5,n.props.changeTreinoStatus(!1);case 5:return e.next=7,n.props.changeMiband(null);case 7:t("disconnect device");case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.endHrm=n.endHrm.bind(Object(A.a)(n)),n}return Object(O.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement(S.a,{variant:"contained",color:"primary",onClick:function(){return e.endHrm(console.log)}},"Finalizar Treino")}}]),t}(a.a.Component),U=Object(u.b)(function(e){return{miband:e.user.miband}},function(e){return Object(o.b)({changeTreinoStatus:D,changeMiband:y},e)})(L),V=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(m.a)(this,Object(v.a)(t).call(this,e))).notigicarPulseira=n.notigicarPulseira.bind(Object(A.a)(n)),n}return Object(O.a)(t,e),Object(f.a)(t,[{key:"notigicarPulseira",value:function(){var e=Object(k.a)(T.a.mark(function e(t){var n,r;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.miband){e.next=4;break}this.props.miband.showNotification("message"),e.next=12;break;case 4:return e.next=6,this.props.device.gatt.connect();case 6:return n=e.sent,r=new G.a(n),this.props.changeMiband(r),e.next=11,r.init();case 11:r.showNotification("message");case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return a.a.createElement(S.a,{variant:"contained",color:"primary",onClick:function(){return e.notigicarPulseira(console.log)}},"Notificar Pulseira")}}]),t}(a.a.Component),X=Object(u.b)(function(e){return{device:e.user.device,miband:e.user.miband}},function(e){return Object(o.b)({changeMiband:y},e)})(V),q=(n(128),function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(m.a)(this,Object(v.a)(t).call(this,e))).props.changeBluetooth(navigator.bluetooth),n}return Object(O.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=window.location.search.split("?");return 2===e.length&&(this.props.changeId(e[1].split(":")[0]),this.props.changeName(e[1].split(":")[1])),a.a.createElement(C.a,{className:"App",justifyContent:"flex-start"},a.a.createElement(_,{hidden:!this.props.name},a.a.createElement("h1",null,this.props.name)),a.a.createElement("div",{className:"button-padding"},a.a.createElement(H.a,null,"favorite")," : ",a.a.createElement("strong",null,this.props.hearthBeat)),a.a.createElement(_,{hidden:null!==this.props.device},a.a.createElement("div",{className:"button-padding"},a.a.createElement(P,null))),a.a.createElement(_,{hidden:this.props.isTreinoStarted||null===this.props.device},a.a.createElement("div",{className:"button-padding"},a.a.createElement(R,null))),a.a.createElement(_,{hidden:!this.props.isTreinoStarted||null===this.props.device},a.a.createElement("div",{className:"button-padding"},a.a.createElement(U,null))),a.a.createElement(_,{hidden:null===this.props.device},a.a.createElement("div",{className:"button-padding"},a.a.createElement(X,null))))}}]),t}(a.a.Component)),J=Object(u.b)(function(e){return{id:e.user.id,name:e.user.name,hearthBeat:e.user.hearthBeat,device:e.user.device,isTreinoStarted:e.user.isTreinoStarted}},function(e){return Object(o.b)({changeBluetooth:N,changeName:E,changeId:g},e)})(q),z=n(22);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(n,!0).forEach(function(t){Object(z.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var K={id:void 0,name:void 0,hearthBeat:0,bluetooth:null,device:null,miband:null,isTreinoStarted:!1},Q=Object(o.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ID_CHANGED":return W({},e,{id:t.payload});case"NAME_CHANGED":return W({},e,{name:t.payload});case"HEARTH_BEAT_CHANGED":return W({},e,{hearthBeat:t.payload});case"MIBAND_CHANGED":return W({},e,{miband:t.payload});case"BLUETOOTH_CHANGED":return W({},e,{bluetooth:t.payload});case"DEVICE_CHANGED":return W({},e,{device:t.payload});case"TREINO_CHANGED":return W({},e,{isTreinoStarted:t.payload});default:return W({},e)}}}),Y=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),Z=Object(o.a)(h.a,d.a,l.a)(o.d)(Q,Y);i.a.render(a.a.createElement(u.a,{store:Z},a.a.createElement(J,null)),document.getElementById("root"))},72:function(e,t,n){e.exports=n(129)},85:function(e,t,n){}},[[72,1,2]]]);
//# sourceMappingURL=main.fa618612.chunk.js.map